<ion-header [translucent]="true">
  <ion-toolbar class="ion-padding">
    <ion-title>Characters</ion-title>
    <ion-note>{{AllCharacter.length}}</ion-note>
  </ion-toolbar>
</ion-header>

@if(!isConnected){
<ion-title color="danger"> SIN CONEXION </ion-title>
} {{filterSearch | json}}
<ion-content class="ion-padding">
  <ion-toolbar>
    <form class="ion-margin" (ngSubmit)="Search()">
      <!--?                     NOMBR                      -->
      <ion-searchbar
        [(ngModel)]="filterSearch.name"
        [ngModelOptions]="{standalone:true}"
        placeholder="Search By Name"
      >
      </ion-searchbar>
      <!--?                     STATUS                      -->
      <ion-select
        [(ngModel)]="filterSearch.status"
        [ngModelOptions]="{standalone:true}"
        placeholder="Status"
        label="Status"
      >
        @for(status of objValuesToSearch.status;track $index ){ @if($first){
        <ion-select-option value="">Any</ion-select-option>
        }
        <ion-select-option [value]="status">{{status}}</ion-select-option>
        }
      </ion-select>
      <!--?                     SPECIES                      -->
      <ion-select
        [(ngModel)]="filterSearch.species"
        [ngModelOptions]="{standalone:true}"
        placeholder="Species"
        label="Specie"
      >
        @for(specie of objValuesToSearch.species;track $index ){ @if($first){
        <ion-select-option value="">Any</ion-select-option>
        }
        <ion-select-option [value]="specie">{{specie}}</ion-select-option>
        }
      </ion-select>
      <!--?                     GENDER                      -->
      <ion-select
        [(ngModel)]="filterSearch.gender"
        [ngModelOptions]="{standalone:true}"
        placeholder="Gender"
        label="Gender"
      >
        @for(gender of objValuesToSearch.gender;track $index ){ @if($first){
        <ion-select-option value="">Any</ion-select-option>
        }
        <ion-select-option [value]="gender">{{gender}}</ion-select-option>
        }
      </ion-select>
      <!--?                     TYPE                      -->
      <ion-select
        [(ngModel)]="filterSearch.type"
        [ngModelOptions]="{standalone:true}"
        placeholder="Type"
        label="Type"
      >
        @for(type of objValuesToSearch.type;track $index ){ @if($first){
        <ion-select-option value="">Any</ion-select-option>
        }
        <ion-select-option [value]="type">{{type}}</ion-select-option>
        }
      </ion-select>

      <!--?                     BUTTON                      -->
      <ion-button type="submit" fill="clear" color="success">
        Filter
      </ion-button>
      <!--?               F I N I S H       F I L T E R                      -->
    </form>
  </ion-toolbar>

  <ion-list [inset]="true" class="container">
    @for (character of AllCharacter; track $index) {
    <ion-item class="item">
      <app-character [character]="character"></app-character>
    </ion-item>
    } @if (IsChargingMore) {
    <ion-skeleton-text [animated]="true"></ion-skeleton-text>
    }
    <ion-infinite-scroll (ionInfinite)="LoadMore($event)">
      <ion-infinite-scroll-content
        loadingText="Loading more"
        loadingSpinner="dots"
      ></ion-infinite-scroll-content>
    </ion-infinite-scroll>
  </ion-list>
</ion-content>
